!function t(e,i,o){function a(r,s){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(n)return n(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return a(i?i:t)},u,u.exports,t,e,i,o)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<o.length;r++)a(o[r]);return a}({1:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=(t("./env"),t("./utils/eventful")),c=t("./utils/utils"),h=t("./data/data"),u=t("./models/AppModel"),l=t("./components/SoundManager"),d=t("./views/LoaderView"),p=t("./views/MenuView"),f=t("./views/GameView"),v=function(t){function e(){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.debug=!1,window.mute=!1,this.model=new u(h),this.$el=$("#wrapper"),this.setup()}return a(e,t),n(e,[{key:"setup",value:function(){var t=this;this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.height=this.$el.height(),this.canvas.width=this.$el.width(),this.$el.html(this.canvas),this.debug&&(new c).stats(this),$(window).keydown(function(e){t.model.keys[e.which]=!0}),$(window).keyup(function(e){t.model.keys[e.which]=!1}),window.location.hash.match("#mute")&&(window.mute=!0,$("#mute").addClass("muted")),$("#mute").on("click",function(){window.mute?(window.location.hash="",$("#mute").removeClass("muted"),window.mute=!1,t.background_sound&&t.background_sound.fade_in(.15)):(window.location.hash="mute",$("#mute").addClass("muted"),window.mute=!0,t.background_sound&&t.background_sound.fade_out())}),this.init()}},{key:"init",value:function(){var t=this;this.view=new d({canvas:this.canvas,ctx:this.ctx,$el:this.$el,model:this.model}),this.view.init(),window.location.hash.match("replay")?this.view.on("load_complete",function(){return t.play()}):this.view.on("load_complete",function(){return t.start_game()}),this.model.state="PLAY",this.render()}},{key:"start_game",value:function(){var t=this,e=this;this.view.off("load_complete"),this.view=new p({canvas:this.canvas,ctx:this.ctx,$el:this.$el,model:this.model}),this.background_sound=new l({sound:this.model.assets.sounds.background,loop:!0}),this.background_sound.player.volume=.15,this.background_sound.play(),this.view.on("ready_play",function(){return $(t.background_sound.player).animate({volume:0})}),this.view.on("play",function(){e.background_sound.player.currentTime=0,e.background_sound.fade_in(.15),e.view.off("ready_play").off("play"),e.play()}),this.view.init()}},{key:"play",value:function(){var t=this;this.model.state="PLAY",this.view=new f({canvas:this.canvas,ctx:this.ctx,$el:this.$el,model:this.model}),this.view.init(),this.view.on("dead",function(){t.model.state="GAME_OVER"}),this.view.on("kill",function(){t.$el.attr("class",""),setTimeout(function(){t.$el.addClass("glow")},0)}),this.view.on("ouch",function(){t.$el.attr("class",""),setTimeout(function(){t.$el.addClass("injury")},0)})}},{key:"game_over",value:function i(){this.view.off("dead").off("kill").off("ouch"),this.background_sound&&this.background_sound.fade_out();var i=$(JST.game_over({score:this.model.score}));this.$el.append(i),i.addClass("show"),$("#play-again").on("click",function(){window.location.hash.match("replay")||(window.location.hash+="replay"),window.location.reload()})}},{key:"render",value:function(){var t=this;this.debug&&this.stats.begin(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.view&&this.view.update(),this.debug&&this.stats.end(),"PLAY"==this.model.state&&requestAnimationFrame(function(){return t.render()}),"GAME_OVER"==this.model.state&&this.game_over()}}]),e}(s);e.exports=v,$(function(){_RACR.instance=new v})},{"./components/SoundManager":13,"./data/data":14,"./env":15,"./models/AppModel":16,"./utils/eventful":18,"./utils/utils":19,"./views/GameView":21,"./views/LoaderView":22,"./views/MenuView":23}],2:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("../utils/eventful"),c=(t("../components/SoundManager"),function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.data=t,this.canvas=t.canvas,this.ctx=t.ctx,this.model=t.model}return a(e,t),n(e,[{key:"update",value:function(){}},{key:"draw",value:function(){}}]),e}(s));e.exports=c},{"../components/SoundManager":13,"../utils/eventful":18}],3:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("./BaseCharacter"),c=t("./utils/EvilSprite"),h=t("../components/SoundManager"),u=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);this.data={height:180,width:78,x:Math.random()*t.canvas.width,y:-1*(Math.random()*t.canvas.height+90),target_x:Math.random()*t.canvas.width,target:t.target,speed:15*Math.random()+10,friction:.95,velocity:0,points:10},this.hit_area={x:this.data.x,y:this.data.y,width:this.data.width-50,height:this.data.height-50},this.sprite=new c({ctx:this.ctx,img:this.model.assets.graphics.vehicles.img,width:this.data.width,height:this.data.height,positions:[[7,-10],[80,-10]],color:[218,67,47],glow:15})}return a(e,t),n(e,[{key:"update",value:function(){this.data.x=this.data.target_x,this.hit_area.x=this.data.x,this.hit_area.y=this.data.y,this.render()}},{key:"render",value:function(){this.data.y+=this.data.speed,this.sprite.draw(1,this.data.x,this.data.y),this.data.y>this.canvas.height+144&&(this.data.y=-1*(Math.random()*this.canvas.height+90),this.data.target_x=Math.random()*(this.canvas.width-144),this.data.speed=15*Math.random()+10)}},{key:"dead",value:function(){new h({sound:this.model.assets.sounds.death}).play();this.data.y=-1*(Math.random()*this.canvas.height+90),this.data.target_x=Math.random()*(this.canvas.width-144),this.data.speed=15*Math.random()+10}}]),e}(s);e.exports=u},{"../components/SoundManager":13,"./BaseCharacter":2,"./utils/EvilSprite":8}],4:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("./BaseCharacter"),c=t("./utils/EvilSprite"),h=t("../components/SoundManager"),u=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);this.data={height:180,width:78,x:Math.random()*t.canvas.width,y:-1*(Math.random()*t.canvas.height+90),target_x:Math.random()*t.canvas.width,target:t.target,speed:15*Math.random()+10,friction:.95,velocity:0,points:15},this.hit_area={x:this.data.x,y:this.data.y,width:this.data.width-50,height:this.data.height-50},this.sprite=new c({ctx:this.ctx,img:this.model.assets.graphics.vehicles.img,width:this.data.width,height:this.data.height,positions:[[7,185],[80,185]],color:[200,47,218],glow:15})}return a(e,t),n(e,[{key:"update",value:function(){this.data.x=this.data.target_x,this.hit_area.x=this.data.x,this.hit_area.y=this.data.y,this.render()}},{key:"render",value:function(){this.data.y+=this.data.speed,this.sprite.draw(1,this.data.x,this.data.y),this.data.y>this.canvas.height+144&&(this.data.y=-1*(Math.random()*this.canvas.height+90),this.data.target_x=Math.random()*(this.canvas.width-144),this.data.speed=15*Math.random()+10)}},{key:"dead",value:function(){new h({sound:this.model.assets.sounds.death}).play();this.data.y=-1*(Math.random()*this.canvas.height+90),this.data.target_x=Math.random()*(this.canvas.width-144),this.data.speed=15*Math.random()+10}}]),e}(s);e.exports=u},{"../components/SoundManager":13,"./BaseCharacter":2,"./utils/EvilSprite":8}],5:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("./BaseCharacter"),c=t("./utils/_Sprite"),h=t("../components/SoundManager"),u=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);var i=this;this.data={height:187,width:77,x:i.canvas.width/2-38.5,y:i.canvas.height-300,left:!1,right:!1,speed:15},this.hit_area={x:this.data.x,y:this.data.y,width:this.data.width-50,height:this.data.height-50},this.sprite=new c({ctx:this.ctx,img:this.model.assets.graphics.vehicles.img,width:this.data.width,height:this.data.height,positions:[[7,378],[83.8,378]],color:[129,251,252],glow:15})}return a(e,t),n(e,[{key:"update",value:function(){var t=this;_.each(this.model.keys,function(e,i,o){"37"==i&&e?t.data.left=!0:"37"!=i||e||(t.data.left=!1),"39"==i&&e?t.data.right=!0:"39"!=i||e||(t.data.right=!1)}),this.data.right&&this.data.x<this.canvas.width-this.data.width&&(this.data.x+=this.data.speed),this.data.left&&this.data.x>this.data.width&&(this.data.x-=this.data.speed),this.hit_area.x=this.data.x,this.hit_area.y=this.data.y,this.render()}},{key:"render",value:function(){this.model.health>0&&this.sprite.draw(1,this.data.x,this.data.y)}},{key:"dead",value:function(){var t=this;new h({sound:this.model.assets.sounds.death}).play();setTimeout(function(){t.trigger("death")},500)}}]),e}(s);e.exports=u},{"../components/SoundManager":13,"./BaseCharacter":2,"./utils/_Sprite":9}],6:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("../BaseCharacter"),c=t("./Loader"),h=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);var i=this;this.state="pre_loading",this.ghost=new c({canvas:this.canvas,radius:150,start:Math.PI/2,end:2*Math.PI,stroke:.5,opacity:.1,glow:15,color:[129,251,252],percent:0,percent_loaded:100,load_speed:2,complete:function(){i.trigger("ghost_complete")}}),this.ring=new c({canvas:this.canvas,radius:150,start:Math.PI/2,end:2*Math.PI,stroke:3,opacity:1,glow:15,color:[129,251,252],percent:0,percent_loaded:0,load_speed:2,complete:function(){i.state="play_out"}})}return a(e,t),n(e,[{key:"update",value:function(){"pre_loading"==this.state&&this.ghost.draw(),"loading"==this.state&&(this.ghost.draw(),this.ring.draw()),"play_out"==this.state&&(this.ghost.play_out(),this.ring.play_out()),this.ring.opacity<=0&&"complete"!=this.state&&(this.state="complete",this.trigger("ring_complete"))}},{key:"play_out",value:function(){console.log("out")}},{key:"loaded",value:function(t){this.ring.percent_loaded=t.loaded/t.total*100,this.state="loading"}}]),e}(s);e.exports=h},{"../BaseCharacter":2,"./Loader":7}],7:[function(t,e,i){"use strict";function o(t){this.ctx=t.canvas.getContext("2d"),this.centerX=t.canvas.width/2,this.centerY=t.canvas.height/2,this.radius=t.radius,this.start=t.start,this.end=t.end,this.stroke=t.stroke,this.opacity=t.opacity,this.color=t.color,this.glow=t.glow,this.percent=t.percent,this.percent_loaded=t.percent_loaded||0,this.load_speed=t.load_speed||2,this.complete=t.complete||{},this.fully_loaded=!1,this.stroke_color=function(){return"rgba("+this.color[0]+","+this.color[1]+", "+this.color[2]+", "+this.opacity+")"},this.progress=function(){return this.percent/100}}o.prototype={draw:function(){this.ctx.beginPath(),this.ctx.arc(this.centerX,this.centerY,this.radius,-this.start,this.end*this.progress()-this.start,this.counter),this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=this.glow,this.ctx.shadowColor=this.stroke_color(),this.ctx.strokeStyle=this.stroke_color(),this.ctx.lineWidth=this.stroke,this.ctx.lineCap="round",this.ctx.stroke(),this.percent<this.percent_loaded&&(this.percent+=this.load_speed),this.percent>=this.percent_loaded&&!this.fully_loaded&&(this.fully_loaded=!0,"function"==typeof this.complete&&this.complete())},play_out:function(){this.glow<55?this.glow++:this.opacity>0&&(this.glow+=2,this.opacity-=.1),this.draw()}},e.exports=o},{}],8:[function(t,e,i){"use strict";function o(t){this.ctx=t.ctx,this.img=t.img,this.width=t.width,this.height=t.height,this.positions=t.positions,this.glow=t.glow,this.opacity=t.opacity||1,this.raw_color=t.color,this.position={x:0,y:0},this.color=function(t){var e=t;return"rgba("+this.raw_color[0]+", "+this.raw_color[1]+", "+this.raw_color[2]+", "+e+")"},this.enemy=t.enemy,this.multiplier=0,this.start=0,this.phase=function(){return this.multiplier=20*Math.sin(2*this.start),this.start+=1*Math.random(),this.multiplier*Math.sin(this.start)+15}}o.prototype={draw:function(t,e,i){var o=this.positions[t],a=180*Math.PI/180,n=0,r=e+55,s=i+150;this.ctx.translate(r,s),e<this.position.x&&(n=5*Math.PI/100),e>this.position.x&&(n=5*Math.PI/100*-1),e==this.position.x&&(n=0*Math.PI/100),this.ctx.rotate(a+n),this.ctx.beginPath(),this.ctx.rect(37.5,this.height-30,this.width-70,250),this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=this.glow,this.ctx.shadowColor=this.color(1),this.ctx.stroke();var c=this.ctx.createLinearGradient(this.height-30,this.height-30+5*Math.random(),this.height-30+5*Math.random(),this.height-30+(150+this.phase()));c.addColorStop(0,this.color(1)),c.addColorStop(1,"rgba(25,28,32,0)"),this.ctx.fillStyle=c,this.ctx.fill(),this.ctx.beginPath(),this.ctx.drawImage(this.img,o[0],o[1],this.width,this.height,0,0,this.width,this.height),this.ctx.rotate(-1*(a+n)),this.ctx.translate(-1*r,-1*s),this.position.x=e},move_to:function(t,e){}},e.exports=o},{}],9:[function(t,e,i){"use strict";function o(t){this.ctx=t.ctx,this.img=t.img,this.width=t.width,this.height=t.height,this.positions=t.positions,this.glow=t.glow,this.opacity=t.opacity||1,this.raw_color=t.color,this.position={x:0,y:0},this.color=function(t){var e=t;return"rgba("+this.raw_color[0]+", "+this.raw_color[1]+", "+this.raw_color[2]+", "+e+")"},this.enemy=t.enemy,this.multiplier=0,this.start=0,this.phase=function(){return this.multiplier=20*Math.sin(2*this.start),this.start+=1*Math.random(),this.multiplier*Math.sin(this.start)+15}}o.prototype={draw:function(t,e,i){var o=this.positions[t],a=(180*Math.PI/180,0),n=e-25,r=i-35;this.ctx.translate(n,r),e>this.position.x&&(a=5*Math.PI/100),e<this.position.x&&(a=5*Math.PI/100*-1),e==this.position.x&&(a=0*Math.PI/100),this.enemy||this.ctx.rotate(a),this.ctx.beginPath(),this.ctx.rect(35.5,this.height-30,this.width-70,250),this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=this.glow,this.ctx.shadowColor=this.color(1),this.ctx.stroke();var s=this.ctx.createLinearGradient(this.height-30,this.height-30+5*Math.random(),this.height-30+5*Math.random(),this.height-30+(150+this.phase()));s.addColorStop(0,this.color(1)),s.addColorStop(1,"rgba(25,28,32,0)"),this.ctx.fillStyle=s,this.ctx.fill(),this.ctx.beginPath(),this.ctx.drawImage(this.img,o[0],o[1],this.width,this.height,0,0,this.width,this.height),this.ctx.rotate(-1*a),this.ctx.translate(-1*n,-1*r),this.position.x=e},move_to:function(t,e){}},e.exports=o},{}],10:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),n=function(){function t(e){o(this,t),this.canvas=e.canvas,this.ctx=e.ctx,this.data={}}return a(t,[{key:"update",value:function(){}},{key:"render",value:function(){}}]),t}();e.exports=n},{}],11:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("./BaseProjectile"),c=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.data={x:t.x,y:t.y,height:45,width:2,speed:20,radius:0,glow:15,color:[129,251,252],multiplier:0,start:0}}return a(e,t),n(e,[{key:"color",value:function(t){var e=t;return"rgba("+this.data.color[0]+", "+this.data.color[1]+", "+this.data.color[2]+", "+e+")"}},{key:"phase",value:function(){return this.data.multiplier=20*Math.sin(2*this.data.start),this.data.start+=1*Math.random(),this.data.multiplier*Math.sin(this.data.start)+15}},{key:"update",value:function(){this.data.y-=this.data.speed,this.render()}},{key:"render",value:function(){this.ctx.beginPath(),this.ctx.rect(this.data.x,this.data.y,this.data.width,this.data.height),this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=this.data.glow,this.ctx.shadowColor=this.color(1),this.ctx.stroke();var t=this.ctx.createLinearGradient(this.data.x-35,this.data.x-35+5*Math.random(),this.data.x-35+5*Math.random(),this.data.x-35+(this.data.height+this.phase()));t.addColorStop(0,this.color(1)),t.addColorStop(1,"rgba(25,28,32,0)"),this.ctx.fillStyle=this.color(1),this.ctx.fill()}}]),e}(s);e.exports=c},{"./BaseProjectile":10}],12:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("../utils/eventful"),c=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var i=this;this.model=t,this.package_loaded=0,this.loaded=0,this.total=0,_.each(this.model.manifest,function(t){_.each(t[0],function(){i.total++})})}return a(e,t),n(e,[{key:"load",value:function(t,e){switch(t){case"audio":this.load_audio(e);case"graphics":this.load_graphics(e)}}},{key:"load_audio",value:function(t){var e=Object.keys(t[0]).length,i=0,o=this;_.each(t[0],function(t,a){var n=new Audio;n.addEventListener("loadeddata",function(){o.model.assets.sounds[a]={src:t.src,duration:1e3*n.duration},i+=1,o.loaded++,i==e?(i++,o.package_loaded++,o.trigger("load_complete",{message:"Audio Loaded",total:o.total,loaded:o.loaded})):o.trigger("asset_loaded",{total:o.total,loaded:o.loaded})}),n.src=t.src})}},{key:"load_graphics",value:function(t){var e=Object.keys(t[0]).length,i=0,o=this;_.each(t[0],function(t,a){var n=new Image;n.onload=function(){o.model.assets.graphics[a]={src:t.src,img:n},i+=1,o.loaded++,i==e?(i++,o.package_loaded++,o.trigger("load_complete",{message:"Graphics Loaded",total:o.total,loaded:o.loaded})):o.trigger("asset_loaded",{total:o.total,loaded:o.loaded})},n.src=t.src})}}]),e}(s);e.exports=c},{"../utils/eventful":18}],13:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("../utils/eventful"),c=function(t){function e(t){var i=this;o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.player=new Audio(t.sound.src),this.player.loop=t.loop||!1,this.duration=t.sound.duration,t.loop&&(this.player_loop=new Audio(t.sound.src)),_RACR.instance.on("mute",function(){return i.mute()}),this.player.addEventListener("ended",function(){return i.trigger("end")})}return a(e,t),n(e,[{key:"play",value:function(){window.mute&&(this.player.volume=0),this.loop?(this.current_player="a",this.play_loop()):this.player.play()}},{key:"fade_in",value:function(t){var e=this;this.vol=t,window.mute||$(this.player).animate({volume:t},function(){e.trigger("fade_in")})}},{key:"fade_out",value:function(){var t=this;$(this.player).animate({volume:0},function(){t.trigger("fade_out")})}},{key:"mute",value:function(){this.fade_out(),window.mute=!0}},{key:"un_mute",value:function(){this.fade_in(this.vol),window.mute=!1}},{key:"play_loop",value:function(){var t=this,e=null;switch(this.current_player){case"a":e=this.player,this.current_player="b";break;case"b":e=this.player_loop,this.current_player="a"}e.play(),this.loop_timeout=setTimeout(function(){t.play_loop()},this.duration-1e3)}},{key:"pause",value:function(){clearTimeout(this.loop_timeout),this.player.pause(),this.player_loop&&this.player_loop.pause()}}]),e}(s);e.exports=c},{"../utils/eventful":18}],14:[function(t,e,i){"use strict";var o={manifest:{audio:[{background:{src:"./audio/background_b.mp3"},death:{src:"./audio/death.mp3"},blast_1:{src:"./audio/blast_1.mp3"},blast_2:{src:"./audio/blast_2.mp3"},blast_3:{src:"./audio/blast_3.mp3"},click:{src:"./audio/click.mp3"},glow:{src:"./audio/glow.mp3"}}],graphics:[{splash:{src:"./images/splash.jpg"},vehicles:{src:"./images/vehicle_assets.png"},test1:{src:"./images/test/test1.jpg"},test2:{src:"./images/test/test2.jpg"},scanline_1_3:{src:"./images/ui/scanline-1x3-trans.png"},background:{src:"./images/ui/tile.png"}}]},characters:{player:{name:"",height:187,width:77,x:0,y:0,positions:[[8,378],[84,378]]}}};e.exports=o},{}],15:[function(t,e,i){"use strict";window._RACR=window._RACR||{}},{}],16:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("./BaseModel"),c=t("../components/Preloader"),h=function(t){function e(t){var i=this;o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.manifest=t.manifest,this.keys={},this.state="",this.score=0,this.health=100,this.assets={sounds:[],graphics:[],characters:[]},this.preloader=new c(this),this.preloader.on("asset_loaded",function(t){return i.asset_loaded(t)}),this.preloader.on("load_complete",function(t){return i.package_loaded(t)})}return a(e,t),n(e,[{key:"preload",value:function(){var t=Object.keys(this.manifest)[this.preloader.package_loaded];this.preloader.package_loaded<Object.keys(this.manifest).length?this.preloader.load(t,this.manifest[t]):this.trigger("assets_loaded")}},{key:"asset_loaded",value:function(t){this.trigger("asset_loaded",{total:t.total,loaded:t.loaded})}},{key:"package_loaded",value:function(t){this.trigger("asset_loaded",{message:t.message,total:t.total,loaded:t.loaded}),this.preload()}},{key:"reset",value:function(){this.keys={},this.state="",this.score=0,this.health=100}}]),e}(s);e.exports=h},{"../components/Preloader":12,"./BaseModel":17}],17:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},r=t("../utils/eventful"),s=function(t){function e(t){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return a(e,t),e}(r);e.exports=s},{"../utils/eventful":18}],18:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),n=function(){function t(){o(this,t),this._events=[]}return a(t,[{key:"validateEventType",value:function(t){if(/^[a-z\-\:\_]+$/g.test(t)===!1)throw"Error: type type must be a string (a-z, -, _)!"}},{key:"validateEventCallback",value:function(t){if("function"!=typeof t)throw"Error: callback must be a function!";
}},{key:"eventTypeExists",value:function(t){return this._events.hasOwnProperty(t)}},{key:"on",value:function(t,e){return this.validateEventType(t),this.validateEventCallback(e),this.eventTypeExists(t)===!1&&(this._events[t]=[]),this._events[t].unshift(e),this}},{key:"off",value:function(t){var e=void 0;if(this.validateEventType(t),this.eventTypeExists(t)===!1)return this;for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;i>a;a++)o[a-1]=arguments[a];return 0===o.length?(this._events[t]=[],this):(this.validateEventCallback(o[0]),e=this._events[t].indexOf(o[0]),-1!==e&&this._events[t].splice(e,1),this)}},{key:"trigger",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(this.validateEventType(t),"object"!=typeof i)throw"Error: data must be an object!";return this.eventTypeExists(t)===!1?this:(i.ev_type=t,this._events[t].map(function(t,o){t.call(e,i)}),this)}}]),t}();e.exports=n},{}],19:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),n=function(){function t(){o(this,t)}return a(t,[{key:"stats",value:function(t){t.stats=new Stats,t.stats.setMode(0),t.stats.domElement.style.position="absolute",t.stats.domElement.style.right="0px",t.stats.domElement.style.top="0px",document.body.appendChild(t.stats.domElement)}}],[{key:"transform",value:function(){return Modernizr.prefixed("transform").replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}},{key:"translate",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=Modernizr.csstransforms3d===!0?"translate3d":"translate",a=Modernizr.csstransforms3d===!0?"("+t+", "+e+", "+i+")":"("+t+", "+e+")";return o+a}},{key:"transitionend",value:function(){var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};return t[Modernizr.prefixed("transition")]}}]),t}();e.exports=n},{}],20:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("../utils/eventful"),c=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.canvas=t.canvas,this.ctx=t.ctx,this.$el=t.$el,this.model=t.model,this.characters=[]}return a(e,t),n(e,[{key:"update",value:function(){}},{key:"render",value:function(){}}]),e}(s);e.exports=c},{"../utils/eventful":18}],21:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("./BaseView"),c=t("../components/SoundManager"),h=t("../characters/Player"),u=t("../characters/Clu"),l=t("../characters/Gem"),d=t("../characters/weapons/Blast"),p=function(t){function e(t){var i=this;o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);var a=this;a.right=!1,a.left=!1,this.characters=[],this.projectiles=[],this.$ui=$(JST.ui()),this.$el.append(this.$ui),this.player=new h(t),this.player.on("death",function(){return i.game_over()}),t.target=this.player,this.clu=new u(t),this.clu2=new u(t),this.clu3=new u(t),this.gem=new l(t),this.gem2=new l(t),this.gem3=new l(t),this.background={x:-111,y:0},$(window).keydown(function(t){switch(t.which){case 32:a.shoot();break;default:return}})}return a(e,t),n(e,[{key:"init",value:function(){this.characters.push(this.clu),this.characters.push(this.clu2),this.characters.push(this.gem),this.characters.push(this.gem2)}},{key:"shoot",value:function(){var t=new d({canvas:this.canvas,ctx:this.ctx,x:this.player.data.x+10,y:this.player.data.y}),e=new c({sound:this.model.assets.sounds.blast_1});e.player.volume=.25,e.play(),this.projectiles.push(t)}},{key:"update",value:function(){var t=this,e=[],i=this.ctx.createPattern(this.model.assets.graphics.background.img,"repeat");this.ctx.fillStyle=i,this.ctx.translate(0,this.background.y),this.ctx.fillRect(0,0,this.canvas.width,2*this.canvas.height),this.ctx.fillRect(0,0,this.canvas.width,2*-this.canvas.height),this.ctx.translate(0,-1*this.background.y),_.each(this.projectiles,function(i){if(i.update(),i.data.y<0){var o=t.projectiles.indexOf(i);e.push(o)}}),this.player.update(),t.ctx.rect(t.player.hit_area.x,t.player.hit_area.y,t.player.hit_area.width,t.player.hit_area.height),_.each(this.characters,function(i){i.update(),t.ctx.rect(i.hit_area.x,i.hit_area.y,i.hit_area.width,i.hit_area.height),_.each(t.projectiles,function(o){if(t.collision(o.data.x,o.data.y,o.data.width,o.data.height,i.hit_area.x,i.hit_area.y,i.hit_area.width,i.hit_area.height)&&i.hit_area.x>0){i.dead(),t.trigger("kill"),t.model.score+=i.data.points;var a=t.projectiles.indexOf(i);e.push(a)}}),t.collision(t.player.hit_area.x,t.player.hit_area.y,t.player.hit_area.width,t.player.hit_area.height,i.hit_area.x,i.hit_area.y,i.hit_area.width,i.hit_area.height)&&(t.model.health-=10,t.trigger("ouch"),t.model.health>0?(i.dead(),t.model.score+=i.data.points/2,$("#health-bar").css({width:t.model.health+"%"})):t.player.dead())}),this.background.y+=20,this.background.y>=this.canvas.height&&(this.background.y=0),_.each(e,function(e){t.projectiles.splice(e,1)}),$("#score").text(t.model.score)}},{key:"game_over",value:function(){$(this.canvas).fadeOut(),this.$ui.fadeOut(),this.trigger("dead")}},{key:"collision",value:function(t,e,i,o,a,n,r,s){return r+=a,i+=t,a>i||t>r?!1:(s+=n,o+=e,n>o||e>s?!1:!0)}}]),e}(s);e.exports=p},{"../characters/Clu":3,"../characters/Gem":4,"../characters/Player":5,"../characters/weapons/Blast":11,"../components/SoundManager":13,"./BaseView":20}],22:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("./BaseView"),c=t("../characters/loaders/GhostRing"),h=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.ghost_ring=new c(t)}return a(e,t),n(e,[{key:"init",value:function(){var t=this;this.model.on("asset_loaded",function(e){return t.ghost_ring.loaded(e)}),this.ghost_ring.on("ghost_complete",function(){return t.start_loading()}),this.ghost_ring.on("ring_complete",function(){return t.complete()})}},{key:"start_loading",value:function(){this.model.preload()}},{key:"update",value:function(){this.ghost_ring.update()}},{key:"complete",value:function(){this.trigger("load_complete")}}]),e}(s);e.exports=h},{"../characters/loaders/GhostRing":6,"./BaseView":20}],23:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t,e,i){for(var o=!0;o;){var a=t,n=e,r=i;s=h=c=void 0,o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,n);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}var h=Object.getPrototypeOf(a);if(null===h)return void 0;t=h,e=n,i=r,o=!0}},s=t("./BaseView"),c=t("../components/SoundManager"),h=function(t){function e(t){o(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return a(e,t),n(e,[{key:"init",value:function(){var t=this,e=this;this.$template=$(JST.menu()),this.$el.append(this.$template),setTimeout(function(){return t.$template.addClass("show")},0);var i=new c({sound:e.model.assets.sounds.click});$(".button",this.$template).on("mouseover",function(){i.play()}),$("#play").on("click",function(){e.play()}),$("#how-to").on("click",function(){console.log("how to")})}},{key:"play",value:function(){var t=this,e=new c({sound:this.model.assets.sounds.death});this.trigger("ready_play"),this.$template.removeClass("show"),setTimeout(function(){t.trigger("play")},500),e.play()}}]),e}(s);e.exports=h},{"../components/SoundManager":13,"./BaseView":20}]},{},[1]),this.JST={game_over:function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)console.log(score),__p+="\n<div id='main-over'>\n	<div id='over-bg'></div>\n	<div id='over-content'>\n		<div id='title'>GAME OVER</div>\n		<div id='final-score'>"+(null==(__t=score)?"":__t)+"</div>\n		<div id='bar'></div>\n		<div id='options'>\n			<div class='button' id='play-again'>play again</div>\n		</div>\n	</div>\n</div>";return __p},menu:function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div id='main-menu'>\n	<div id='menu-bg'></div>\n	<div id='menu-content'>\n		<div id='title'>RACER</div>\n		<div id='bar'></div>\n		<div id='options'>\n			<div class='button' id='play'>play</div>\n		</div>\n	</div>\n</div>";return __p},ui:function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div id='ui'>\n	<div id='health-wrapper'>\n		<div id='health-bar'></div>\n	</div>\n\n	<div id='score'>0</div>\n</div>";return __p}};